[
  {
    color: '#000000', name: 'Five K.',
    data: [
      <!-- Starting point (0) -->
      { x: <%= @start_date.to_i %>, y: 0 },
      { x: <%= Time.now.to_i %>, y: <%= (@elapsed / 3600.0 / 24.0) * 5000.0 %> },
      { x: <%= @end_date.to_i %>, y: <%= (@duration / 3600.0 / 24.0) * 5000.0 %> },
    ]
  },
  {
    color: '#000000', name: 'Three K.',
    data: [
      <!-- Starting point (0) -->
      { x: <%= @start_date.to_i %>, y: 0 },
      { x: <%= Time.now.to_i %>, y: <%= (@elapsed / 3600.0 / 24.0) * 3000.0 %> },
      { x: <%= @end_date.to_i %>, y: <%= (@duration / 3600.0 / 24.0) * 3000.0 %> },
    ]
  },
  <%- @users.each_with_index do |user, i| %>
    <%- total = 0 %>
    {
      color: '<%= colors[i] %>',
      name: '<%= user.label %>',
      data: [
        <!-- Starting point (0) -->
        { x: <%= @start_date.to_i %>, y: <%= total %> },

        <!-- Activities -->
        <%- activities = user.activities.c2015.order('start_date ASC') %>
        <%- for activity in activities  %>
          <%- total += activity.distance %>
          { x: <%= activity.start_date.to_i %>, y: <%= total %> },
        <%- end %>

        <!-- Current total -->
        { x: <%= Time.now.to_i %>, y: <%= total %> },

        <!-- Projected total -->
        <%- average = total / @elapsed %>
        <%- projection = average * @duration %>
        { x: <%= @end_date.to_i %>, y: <%= user.fortnight_projection %> },
      ]
    },
  <%- end %>
]
